/*! imslib.js 1.9.0 0ad1971-e134ce2 */
Array.prototype.every||(Array.prototype.every=function(a,b){"use strict";var c,d;if(null==this)throw new TypeError("this is null or not defined");var e=Object(this),f=e.length>>>0;if("function"!=typeof a)throw new TypeError;for(arguments.length>1&&(c=b),d=0;d<f;){var g;if(d in e){g=e[d];if(!a.call(c,g,d,e))return!1}d++}return!0}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;if(null===this)throw new TypeError(" this is null or not defined");var e=Object(this),f=e.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=0;d<f;){var g;d in e&&(g=e[d],a.call(c,g,d,e)),d++}}),Array.prototype.includes||(Array.prototype.includes=function(a){"use strict";if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var b=Object(this),c=parseInt(b.length,10)||0;if(0===c)return!1;var d,e=parseInt(arguments[1],10)||0;e>=0?d=e:(d=c+e,d<0&&(d=0));for(var f;d<c;){if(f=b[d],a===f||a!==a&&f!==f)return!0;d++}return!1}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Date.now||(Date.now=function(){return(new Date).getTime()}),Object.keys||(Object.keys=function(){"use strict";var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;g<d;g++)a.call(e,c[g])&&h.push(c[g]);return h}}()),String.prototype.includes||(String.prototype.includes=function(a,b){"use strict";return"number"!=typeof b&&(b=0),!(b+a.length>this.length)&&this.indexOf(a,b)!==-1}),String.prototype.startsWith||(String.prototype.startsWith=function(a,b){return b=b||0,this.substr(b,a.length)===a}),function(){function a(a){this.message=a}var b=window.self;a.prototype=Error(),a.prototype.name="InvalidCharacterError",b.atob||(b.atob=function(b){var c=(b+"").replace(/[=]+$/,"");if(c.length%4===1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var d,e,f=0,g=0,h="";e=c.charAt(g++);~e&&(d=f%4?64*d+e:e,f++%4)?h+=String.fromCharCode(255&d>>(-2*f&6)):0)e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e);return h})}(),function(a){a.adobeid=function(a){"use strict";var b;return"object"==typeof window.adobeid?b=window.adobeid:window.opener&&window.opener.adobeid?b=window.opener.adobeid:(b=window.adobeid={},a.logErrorToConsoleInDebugMode("Missing window.adobeid, falling back to an empty object")),b},a.alertMessages=function(){"use strict";return{dev:{adobeid:"Please declare the adobeid variable before loading the Javascript file for the IMS SDK",both_modal_and_redirect:"Error: you can't have both adobeid.uses_modal_mode and adobeid.uses_redirect_mode set to true.",client_id_missing:"Error: the ClientID is missing.",api_calls_only_https:"Error: the API calls must be made only through HTTPS.",mandatory_sign_in_only_in_redirect:"is_mandatory_sign_in only works in full web redirect mode.",scope_doesnt_ask_for_userId_from_profile:"The provided scopes don't ask for the userId from the user's profile",client_id_missing_from_query:'Please add the "#client_id#" to the comma separated list that is the client_id query parameter',load_the_sdk_only_once:"Please load the Javascript SDK only once."},user:{allow_pop_up_window:"The browser's pop-up blocker has stopped a window from opening. To be able to sign-in, please use the browser's UI (in the address bar) to allow the window to be opened. Thank you.",adobeid:"Please declare the adobeid variable before loading the Javascript file for the IMS SDK",api_calls_only_https:"Error: the API calls must be made only through HTTPS.",both_modal_and_redirect:"Error: you can't have both adobeid.uses_modal_mode and adobeid.uses_redirect_mode set to true.",client_id_missing:"Error: the ClientID is missing.",client_id_missing_from_query:'Please add the "#client_id#" to the comma separated list that is the client_id query parameter',load_the_sdk_only_once:"Please load the Javascript SDK only once.",mandatory_sign_in_only_in_redirect:"is_mandatory_sign_in only works in full web redirect mode.",scope_doesnt_ask_for_userId_from_profile:"The provided scopes don't ask for the userId from the user's profile",network_error:"A network error has occurred. Are you connected to the internet?"}}},a.analytics=function(a){"use strict";var b="jslMethods",c=[],d=[],e={},f=function(a){var e=a;c.includes(a)&&(e=c.indexOf(a),d.includes(e)||(d.push(e),d.sort(function(a,b){return a-b}),i().setItem(b,d.join("+"))))},g=function(){return d},h=function(a){d=j();for(var b in a)a.hasOwnProperty(b)&&"function"==typeof a[b]&&(c.push(b),e[b]=a[b],function(){var c=b;a[c]=function(){return f(c),e[c].apply(a,arguments)}}())},i=function(){return a.session},j=function(){var a=i().getItem(b);return a=a?a.split("+").map(function(a){return parseInt(a,10)}):[]};return{getMethods:g,trackObject:h}},a.base32=function(){"use strict";function a(a,b,c){var d=b-c.length;return d>0&&(c=Array(d+1).join(a)+c),c}function b(b){return a("0",5,b.toString(2))}function c(a){if(a.length%8!==0)throw Error("Data length is not a multiple of 8");a.forEach(function(a){if(!(a in g))throw Error("Unknown encoded character "+a)});var b=!1;a.forEach(function(a){if("="!==a&&b)throw Error("Found padding char in the middle of the string");"="===a&&(b=!0)})}function d(a){for(var b=a.length-1,c=0;"="===a[b];)++c,--b;return c}function e(a){if("string"!=typeof a)throw Error("Data is not a string");var e=a.toLowerCase().split("");c(e);var f=d(e),h=[];e.forEach(function(a){h.push(b(g[a]))});var i=h.join("");return f>0&&(i=i.slice(0,-5*f)),i.length%8!==0&&(i=i.slice(0,-1*(i.length%8))),i}var f="abcdefghijklmnopqrstuvwxyz234567".split(""),g={"=":0};return f.forEach(function(a,b){g[a]=b}),{decodeToBitstring:e}},a.config=function(b,c,d){"use strict";function e(){var a=d.getThisScriptSrc(),b=/\bclient_id=([^&]+)\b/.exec(a);return b?b[1].split(","):[]}function f(){var a=d.getThisScriptSrc(),b=/\blocale=([^&]+)\b/.exec(a);return b?b[1]:""}function g(){return c.client_id?Array.isArray(c.client_id)?c.client_id[0]:c.client_id:(d.logToConsoleInDebugMode("Missing window.adobeid.client_id. Falling back to client_id from url. Please add client_id to window.adobeid"),e()[0])}function h(){return c.locale?c.locale:(d.logToConsoleInDebugMode("Missing window.adobeid.locale. Falling back to locale from url. Please add locale to window.adobeid"),f())}var i=e();return i&&0!==i.length||(i=c.client_id),{sloEnabled:!0,refreshSsoCookiesEnabled:!1,sunbreakScope:"acct_mgmt_webui",sunbreakScopeExpanded:"acct_mgmt_api,gnav,update_profile.address.mail_to,update_profile.dob,update_profile.email,update_profile.first_name,update_profile.industry,update_profile.job_function,update_profile.job_title,update_profile.last_name,update_profile.mrktPerm,update_profile.password,update_profile.phoneNumber,update_profile.phonetic_name,update_profile.preferred_languages,update_profile.screen_name,update_profile.secondary_email",locale:h(),client_id:g(),api:a.config.$$api(b,i,c)}},a.config.$$api=function(b,c,d){"use strict";var e=a.endpoints(b,d);Array.isArray(c)||(c=[c]);var f={version:{v1:"v1"}};for(var g in e)if(e.hasOwnProperty(g)){var h=e[g],i={name:h.name,endpoint:{}};f[g]=i;for(var j=0,k=c.length;j<k;++j){var l=c[j];i.endpoint[l]=h.endpoint}}return f},a.endpoints=function(a,b){"use strict";if(b=b||{},b.uses_slo||(b.uses_slo=!1),!a||!a.login||!a.services)throw Error("Hosts are not defined or incomplete: "+JSON.stringify(a));return{authorize:{name:"authorize",endpoint:a.login+"/authorize/v1"},avatar:{name:"avatar/download",endpoint:a.login+"/avatar/download"},check:{name:"check/token",endpoint:(b.uses_slo?a.login:a.services)+"/check/${ version }/token"},check_status:{name:"check/status",endpoint:(b.uses_slo?a.login:a.services)+"/check/v1/status"},logout:{name:"logout",endpoint:(b.uses_slo?a.login:a.services)+"/logout/v1"},logout_token:{name:"logout_token",endpoint:(b.uses_slo?a.login:a.services)+"/logout/v1/token"},profile:{name:"profile",endpoint:a.login+"/profile/v1"},validate_token:{name:"validate_token",endpoint:a.login+"/validate_token/v1"},userinfo:{name:"userinfo",endpoint:a.login+"/userinfo/v1"},fg_value:{name:"fg_value",endpoint:a.services+"/fg/value/v1"},social_providers:{name:"social_providers",endpoint:a.login+"/social/v1/providers"}}},a.events=function(a){"use strict";return{EventTarget:function(){var b={};this.addEventListener=function(a,c){var d=b[a]||[];b[a]=d,d.push(c)},this.dispatchEvent=function(c,d){var e=b[c];if(e)for(var f={type:c,data:d},g=0,h=e.length;g<h;++g)a.callIfFunction(e[g],null,[f])}}}},a.http=function(a,b,c){"use strict";var d=function(a){var b="",c=!0;for(var d in a)if(a.hasOwnProperty(d)&&void 0!==a[d]){var e,f=encodeURIComponent(d),g=a[d];e=null===g?"null":"object"==typeof g?encodeURIComponent(JSON.stringify(g)):encodeURIComponent(g),b+=(c?"":"&")+f+"="+e,c=!1}return b},e=function(a,b){if(a){var c=d(a);return c&&(c=b&&b.indexOf("?")!==-1?"&"+c:"?"+c),c}return""},f=function(d){if(d+=e(b,d),a.isDebugMode){var f=c.getMethods();f.length&&(d+="&jslMethods="+f.join("+"))}return d},g="_adobeIMSJSONPCallbacks",h=function(b,c,d){c=c||{};var h=window[g];h||(h=window[g]={});var i="_"+a.createRandomString();c.callback="window."+g+"."+i,b+=e(c,b),b=f(b);var j=document.createElement("script");j.src=b,j.async=!0,j.type="text/javascript";var k=a.getDocumentHead();h[i]=function(b){a.isDebugMode&&a.logToConsole("api call response: "+JSON.stringify(b)),d(!1,b),a.removeKeyFromObject(h,i)};var l=function(){k.removeChild(j)};a.addEventListener(j,"load",l),a.addEventListener(j,"error",function(){d(!0,null),l()}),k.appendChild(j)},i={POST:"POST",GET:"GET"},j={JSON:"application/json",URI:"application/x-www-form-urlencoded"},k=function(){return!!XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}(),l=function(a,b,c,d,e,g){var h=new XMLHttpRequest;if(b=f(b),h.onreadystatechange=function(){h.readyState===h.DONE&&g(h.status,h.responseText,h)},h.open(a.toUpperCase(),b,!0),e)for(var i in e)e.hasOwnProperty(i)&&h.setRequestHeader(i,e[i]);h.withCredentials=d,h.send(c)},m=function(a,b,c,d){a+=e(c,a),l(i.GET,a,null,!0,b,d)},n=function(a,b,c,e,f){if(b=b||{},c){switch(e){case j.JSON:c=JSON.stringify(c);break;case j.URI:c=d(c);break;default:throw Error("Unknown encoding "+e)}b["Content-Type"]=e}l(i.POST,a,c,!0,b,f)};return{buildQueryString:e,jsonp:h,corsGet:m,corsPost:n,cors:function(a,b,c,d,e,f){switch(e=e||j.URI,a.toUpperCase()){case i.GET:m(b,c,d,f);break;case i.POST:n(b,c,d,e,f);break;default:throw Error("Unknown HTTP method "+a)}},corsSupported:k,Method:i,DataEncoding:j}},a.imsApis=function(a,b,c,d,e,f,g){"use strict";function h(a){E=a}function i(){"function"==typeof E&&E.apply(null,arguments)}function j(a){if(!(a&&a.name&&c.api_parameters))return{};for(var b in c.api_parameters)if(a.name.includes(b))return c.api_parameters[b];return{}}function k(a,b){if(b&&b.client_id)return b.client_id;var d=j(a);return d&&d.client_id?d.client_id:c.client_id?Array.isArray(c.client_id)?c.client_id[0]:c.client_id:f}function l(){return c.locale||g}function m(a,c,d){return 2!==arguments.length&&d||(d={}),d.client_id||(d.client_id=k()),b.applyExtraApiParameters(d,j(a),c)}function n(a,d){var e="AdobeID,openid";if(d&&d.scope)e=d.scope;else{var f=j(a);f&&f.scope?e=f.scope:c.scope&&(e=c.scope)}return b.String_withoutWhitespaces(e)}function o(a,c,d){d||(d=k(a));var e=a.endpoint[d];return e?(e.includes("${ version }")?e=e.replace("${ version }",c||"v1"):c&&(e+="/"+c),e):(b.logToConsoleInDebugMode("No url found for api "+a.name+" for client "+d),"")}function p(b,c,d,e){!e&&d&&(e=d.client_id);var f=o(b,c,e);return f?f+a.buildQueryString(d,f):""}function q(){var b=!0;return c.optimizations&&"useCORS"in c.optimizations&&(b=!!c.optimizations.useCORS),a.corsSupported&&b}function r(c,d,e){var f=b.cloneObject(c.params)||{};f.client_id||(f.client_id=k(c.api));var g=o(c.api,c.apiVersion,f.client_id),h=c.method||a.Method.GET,i={};c.bearerToken&&(i[F.AUTHORIZATION]="Bearer "+c.bearerToken),i[F.X_IMS_CLIENT_ID]=f.client_id,a.cors(h,g,i,f,a.DataEncoding.URI,function(a,b,c){429===a?e({error:G.RATE_LIMITED,retryAfter:window.parseInt(c.getResponseHeader(F.RETRY_AFTER),10)}):b?(b=JSON.parse(b),b.error_flag||b.error?e(b):d(b)):e(null)})}function s(c,d,e){var f=b.cloneObject(c.params),g=o(c.api,c.apiVersion,f.client_id);c.bearerToken&&(f.bearer_token=c.bearerToken),a.jsonp(g,f,function(a,b){a||b.error_flag||b.error?e(b):d(b)})}function t(a,b,c){if(!a)throw Error("No config object provided");if(!a.api)throw Error("No `config.api` provided");c=c||i,q()?r(a,b,c):s(a,b,c)}function u(b,c,e){t({api:d.validate_token,params:m(d.validate_token,{token:b.access_token,client_id:b.client_id,typeof:"access_token"}),method:a.Method.POST},c,e)}function v(b,c,e){var f=m(d.logout_token,{access_token:b});e=e||i;var g=function(a){a&&a.error?e(a):c(a)};t({api:d.logout_token,method:a.Method.POST,params:f},g,g)}function w(a,b,e){var f=m(d.profile);t({api:c.openidCompatible?d.userinfo:d.profile,bearerToken:a,params:f},b,e)}function x(a,b){t({api:d.check_status,params:m(d.check_status)},a,b)}function y(b,c,e){b=m(d.check,b,{scope:n(),locale:l()});var f=function(a){a.jump?e(a):c(a)};q()?t({api:d.check,apiVersion:"v4",method:a.Method.POST,params:b},f,e):e({error:G.NO_CORS})}function z(a){return o(d.avatar)+"/"+a}function A(a){return a=m(d.authorize,a,{response_type:"token",client_id:k(),scope:n(),locale:l()}),p(d.authorize,null,a)}function B(a){return a=m(d.logout,a,{locale:l()}),p(d.logout,null,a)}function C(a,c,f){t({api:d.fg_value,params:m(d.fg_value,{client_id:k(d.fg_value)}),bearerToken:a},function(a){a&&""!==a?c(a,b.bitstringToLSB(e.decodeToBitstring(a.releaseFlags))):b.callIfFunction(f,null,[null])},f)}function D(a,b){t({api:d.social_providers,params:m(d.social_providers,{client_id:k()})},a,b)}var E,F={AUTHORIZATION:"Authorization",X_IMS_CLIENT_ID:"X-IMS-ClientId",RETRY_AFTER:"Retry-after"},G={NO_CORS:"no_cors",RATE_LIMITED:"rate_limited"};return{getApiUrlWithQuery:p,getApiUrl:o,makeApiCall:t,validateToken:u,checkStatus:x,checkToken:y,getProfile:w,logoutToken:v,getReleaseFlags:C,getAvatarUrl:z,getAuthorizeUrl:A,getLogoutUrl:B,getSocialProviders:D,apiEndpoints:d,getApiParameters:j,getClientId:k,getLocale:l,getScope:n,setGlobalErrorHandler:h,Errors:G}},a.adobeIMS=function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(a){return a?f.local:f.session}function m(){return f.session}function n(){return!(!b.optimizations||!b.optimizations.fastEvents)}function o(){var d=this;this.adobeid=b,!c.isDebugMode&&this.adobeid.uses_debug_mode&&(c.isDebugMode=!0),this._accessTokensInfos={},this._profile=null,this._is_already_attached_to_ui=!1,this._last_ui_update={_any_update_so_far:!1,_accessTokensInfos:{},_profile:null,update:function(){this._any_update_so_far=!0,this._accessTokensInfos=c.cloneObject(d._accessTokensInfos),this._profile=c.cloneObject(d._profile)},areThereUIUpdatesToPerformForAccessTokens:function(){return!this._any_update_so_far||!c.equals(this._accessTokensInfos,d._accessTokensInfos)},areThereUIUpdatesToPerformForProfile:function(){return!this._any_update_so_far||!c.equals(this._profile,d._profile)},areThereUIUpdatesToPerform:function(){return this.areThereUIUpdatesToPerformForProfile()||this.areThereUIUpdatesToPerformForAccessTokens()}},a.setGlobalErrorHandler(function(){d._onApiError.apply(d,arguments)})}function p(a,d){try{c.callIfFunction(b[a],b,d)}catch(b){this._onError(this.errors.jsException.setException(b,"adobeid."+a))}}function q(a){return!(!a||"ride_AdobeID_acct_disabled"!==a.error)}function r(b){return b.error===a.Errors.RATE_LIMITED}function s(a){return!a||!!(a.error||a.error_flag||a.error_description)}function t(a){a._invalidateTokens(Object.keys(a._accessTokensInfos),function(){a._clearCredentials({updateUI:!0}),a.signIn()})}function u(b,d,e){arguments.length<3&&(e=d,d=b.getAccessToken()),a.getProfile(d,function(a){b.setProfile(a),c.callIfFunction(e,b)},function(a){c.logErrorToConsoleInDebugMode("Failed to retrieve the profile "+a),r(a)?(v(a,b),c.callIfFunction(e,b)):q(a)?t(b):s(a)?(b._clearCredentials({updateUI:!0}),c.callIfFunction(e,b)):c.callIfFunction(e,b)})}function v(a,b){b._onError(b.errors.rateLimit.create(a.retryAfter,b.isSignedInUser()))}function w(a,b){I&&(I.closed||I.close(),I=null);var d=[];return Object.keys(b||{}).forEach(function(a){var c=b[a];c===!0?c="yes":c===!1?c="no":c+="",d.push(a+"="+c)}),I=c.openPopup(a,G,d.join(",")),I&&"function"==typeof I.focus&&I.focus(),I}function x(a,b){N.isRequired=a,N.url=b}function y(){return N}var z="adobeid_ims_access_token",A="/",B="adobeid_ims_profile",C="from_ims",D=C+"=true",E="rctx",F=b.popupPageName||"redirectims.html",G="_blank",H={sign_in:{width:500,height:630},sign_up:{width:500,height:800},sign_out:{width:320,height:240},jump:{width:500,height:800},any:{width:500,height:630}},I=null;if(window.adobeIMS)return c.logErrorToConsoleInDebugMode("adobeIMS already exists. Have you loaded the file twice?"),null;var J,K={PROFILE:"profile",ACCESS_TOKEN:"accesstoken",ACCESS_TOKEN_EXPIRED:"accesstokenexpired",READY:"ready",ERROR:"error"},L=new g.EventTarget,M=b.openidCompatible?"sub":"userId",N={isRequired:!1,url:null},O=null,P=null,Q={Events:K,addEventListener:function(a,b){L.addEventListener(a,b)},IMSAPIs:{},errors:{network:{name:"networkError",userMessage:"Network error"},fromApiCallRedirect:{name:"fromApiCallRedirectError",userMessage:"",setMessage:function(a){return this.userMessage=a,this}},avatarPicture:{name:"avatarPictureError",userMessage:"current scopes won't retrieve the user_id"},jsException:{name:"jsExceptionError",message:"",exception:null,setException:function(a,b){return this.exception=a,this.message=b||"",this}},rateLimit:{name:"rate_limit",retryAfter:null,isUserSignedIn:null,create:function(a,b){return{name:this.name,retryAfter:a,isUserSignedIn:b}}}},getUrlForApiCall:function(b,c,d){return 2===arguments.length&&(d=arguments[1],c=null),a.getApiUrlWithQuery(b,c,d)},makeApiCall:function(b,c,d,e){return 3===arguments.length&&(e=arguments[2],d=arguments[1],c=null),a.makeApiCall({api:b,apiVersion:c,params:d,forceJsonp:!0},e)},_onApiError:function(a){var b=c.cloneObject(this.errors.network);b.debug={url:a},this._onError(b)},getUserProfile:function(){return this._profile},getUserPictureURL:function(){return this._profile?this._profile[M]?a.getAvatarUrl(this._profile[M]):(this._onError(this.errors.avatarPicture),""):""},getAccessTokenInfo:function(a,b,c){var d=this.getAccessTokenSessionStorageKey(a,b,c),e=this._accessTokensInfos[d];return e?l(e.isReAuthentication).getItem(d)?e:(this._clearCredentials({access_token:e.access_token}),null):null},getAccessToken:function(a,b,c){var d=this.getAccessTokenInfo(a,b,c);return d?d.access_token:null},getAccessTokenSessionStorageKey:function(a,b,c){return[z,b||this.getClientID(),!!a,c||this.getScope()].join(A)},getKeyForAccessToken:function(a){for(var b in this._accessTokensInfos)if(a===this._accessTokensInfos[b].access_token)return b;return c.assert(!1,"unknown access_token for key: "+b),null},_isAccessTokenInfoUsable:function(a){return a&&"string"==typeof a.access_token&&"string"==typeof a.client_id&&this.isKnownClientID(a.client_id)&&"string"==typeof a.scope&&"boolean"==typeof a.isReAuthentication&&"number"==typeof a.expires_in&&"number"==typeof a.expiresAtMilliseconds&&Date.now()<a.expiresAtMilliseconds},loadFromStorage:function(){var a=this;this._accessTokensInfos={};var b=function(b){for(var d in b.keys?b.keys():b)if(d.startsWith(z))try{var e=JSON.parse(b.getItem(d));if(!a.isKnownClientID(e.client_id))continue;a._isAccessTokenInfoUsable(e)?a._accessTokensInfos[d]=e:(c.logToConsoleInDebugMode("unusable access token info: "+b.getItem(d)),b.removeItem(d))}catch(a){b.removeItem(d)}};b(l(!1)),b(l(!0)),this._profile=JSON.parse(m().getItem(B))},hasTokenButItHasExpired:function(a,b,c){var d=this.getAccessTokenInfo(a,b,c);return d&&Date.now()>d.expiresAtMilliseconds?d:void 0},isSignedInUser:function(a,b,c){var d=this.getAccessTokenInfo(a,b,c);return d&&Date.now()<d.expiresAtMilliseconds?d:void 0},signIn:function(b,d){this.contextToBePassedOnRedirect=d;var e=c.applyExtraApiParameters({},b);e.redirect_uri=this._getRedirectUri(i.api.authorize,e),this.version&&(e.jslibver=this.version);var f=a.getAuthorizeUrl(e);this.isModal()&&this._callCallbacksToUpdateUI(),this._openWindow(f,"create_account"===e.idp_flow?H.sign_up:H.sign_in)},reAuthenticate:function(a,b){this.signIn(c.applyExtraApiParameters({reauth:"check",puser:this._profile&&this._profile.email?this._profile.email:void 0,eu:this._profile&&this._profile.email?"true":void 0},a),b)},isReAuthentication:function(a){return a&&a.reauth},updateRedirectUriForReAuthentication:function(a,b){return"string"==typeof a&&this.isReAuthentication(b)?(a.includes("reauth=")||(a=a+"&reauth="+b.reauth),a):a},getContextFromRedirectForAccessToken:function(a){if(this.contextPassedFromRedirect&&this.contextPassedFromRedirect.access_token===a){var b=this.contextPassedFromRedirect.context;return this.contextPassedFromRedirect=null,b}return null},signUp:function(a,b){this.isModal()&&this._callCallbacksToUpdateUI(),this.signIn(c.applyExtraApiParameters({idp_flow:"create_account"},a),b)},_invalidateTokens:function(b,d){var e=this,f=b.length;f?b.forEach(function(b){a.logoutToken(e._accessTokensInfos[b].access_token,function(){--f,0===f&&c.callIfFunction(d)})}):c.callIfFunction(d)},signOut:function(b){function d(d){if(!d)return void e._clearCredentials({updateUI:!0});var f=c.applyExtraApiParameters(e.getAdobeIdApiParametersForApi(i.api.logout),b);e.isModal()&&f.redirect_uri&&e.switchToRedirectMode();var g=a.getLogoutUrl(c.applyExtraApiParameters({access_token:d.access_token,redirect_uri:e._getRedirectUri(e.config.api.logout,b)},f));e._clearCredentials({updateUI:!0}),e._openWindow(g,H.sign_out)}var e=this,f=Object.keys(this._accessTokensInfos);if(f.length){var g=this._accessTokensInfos[f.pop()];this._invalidateTokens(f,function(){d(g)})}else e._clearCredentials({updateUI:!0})},switchToRedirectMode:function(){this.adobeid.uses_modal_mode=!1,this.adobeid.uses_redirect_mode=!0},switchToModalMode:function(){this.adobeid.uses_modal_mode=!0,this.adobeid.uses_redirect_mode=!1},_clearCredentials:function(a){var b;if(a&&a.access_token)b=this.getKeyForAccessToken(a.access_token),l(!1).removeItem(b),l(!0).removeItem(b),c.removeKeyFromObject(this._accessTokensInfos,b);else{for(b in this._accessTokensInfos)if(b.startsWith(z)){var d=this._accessTokensInfos[b];l(d.isReAuthentication).removeItem(b)}this._accessTokensInfos={},m().removeItem(B),this._profile=null,this._clearTimerTestSSOCookieWillExpire()}a&&a.updateUI===!0&&this._callCallbacksToUpdateUI(a)},_callCallbacksToUpdateUI:function(a){if(this._last_ui_update.areThereUIUpdatesToPerform()){var b=c.cloneObject(this._last_ui_update);if(this._last_ui_update.update(),b.areThereUIUpdatesToPerformForProfile()&&L.dispatchEvent(K.PROFILE,{profile:this._profile}),b.areThereUIUpdatesToPerformForAccessTokens())if(a&&a.access_token){var d=this._accessTokensInfos[this.getKeyForAccessToken(a.access_token)];L.dispatchEvent(K.ACCESS_TOKEN,{accessTokenInfo:d})}else for(var e in this._accessTokensInfos)c.equals(this._accessTokensInfos[e],b._accessTokensInfos[e])||L.dispatchEvent(K.ACCESS_TOKEN,{accessTokenInfo:this._accessTokensInfos[e]})}},_onReady:function(){if(!this.onReadyAlreadyCalled){this.onReadyAlreadyCalled=!0,this._callCallbacksToUpdateUI();var a={};a.userActionInfo=y(),a.isUserSignedIn=!a.userActionInfo.isRequired&&!!this.isSignedInUser(),L.dispatchEvent(K.READY,{signInState:a})}},isReady:function(){return!!this.onReadyAlreadyCalled},_onError:function(a){L.dispatchEvent(K.ERROR,{error:a}),"function"!=typeof this.adobeid.onError&&("string"==typeof a.userMessage?c.logToConsoleInDebugMode(a.userMessage):c.logErrorToConsoleInDebugMode("unhandled javascript error: "+JSON.stringify(a)),a.debug&&c.logToConsoleInDebugMode(JSON.stringify(a.debug)))},_update_url_ims_api:function(){if(this.adobeid.target_env){var a={replaceWhat:/https?:\/\/adobeid-na1-(dev|qa|stg)\d\.services\.adobe\.com/i,replaceWith:"https://adobeid-na1-"+this.adobeid.target_env+".services.adobe.com"},b={replaceWhat:/https?:\/\/ims-na1-(dev|qa|stg)\d\.adobelogin\.com/i,replaceWith:"https://ims-na1-"+this.adobeid.target_env+".adobelogin.com"},d=/https?:\/\/\S*\.corp\.adobe\.com(:\d*)?/i;for(var e in i.api){var f=i.api[e];if(!c.isEmptyObject(f.endpoint))for(var g in f.endpoint){var h=d.test(f.endpoint[g]);if(h){var j=f.name.includes("check")||f.name.includes("logout")?a:b;f.endpoint[g]=f.endpoint[g].replace(d,j.replaceWith)}else f.endpoint[g]=f.endpoint[g].replace(a.replaceWhat,a.replaceWith).replace(b.replaceWhat,b.replaceWith)}}c.isDebugMode&&(c.logToConsole("target_env = "+this.adobeid.target_env),c.logToConsole("authorize = "+i.api.authorize.endpoint[this.getClientID(i.api.authorize)]),c.logToConsole("check = "+i.api.check.endpoint[this.getClientID(i.api.check)]))}},_initialize:function(){var a=this;L.addEventListener(K.PROFILE,function(b){p.call(a,"onProfile",[b.data.profile])}),L.addEventListener(K.ACCESS_TOKEN,function(b){p.call(a,"onAccessToken",[b.data.accessTokenInfo.access_token,b.data.accessTokenInfo])}),L.addEventListener(K.READY,function(b){p.call(a,"onReady",[b.data.signInState])}),L.addEventListener(K.ERROR,function(a){c.callIfFunction(b.onError,b,[a.data.error])}),this._update_url_ims_api();var d=function(){a.isMandatorySignIn()&&!a.isSignedInUser()&&a.signIn()},e=function(){var b=c.cloneObject(a._accessTokensInfos||{}),e=function(){if(d(),a._callCallbacksToUpdateUI(),n()&&!a.isSignedInUser())for(var c in b)b.hasOwnProperty(c)&&b[c]&&L.dispatchEvent(K.ACCESS_TOKEN_EXPIRED,{accessTokenInfo:b[c]});a._onReady()};if(a.isSingleLogOutEnabled()||!a.isSignedInUser())a.signInBasedOnSingleSignOnSSO(function(b){"no_cors"===b&&a.isSignedInUser()?u(a,e):c.callIfFunction(e,a)});else{var f=a.getAccessToken();c.removeKeyFromObject(b,a.getKeyForAccessToken(f)),a.testAccessTokenIsStillValid(f,e)}};n()&&(L.addEventListener(K.ACCESS_TOKEN_EXPIRED,function(b){p.call(a,"onAccessTokenHasExpired",[b.data.accessTokenInfo.access_token,b.data.accessTokenInfo])}),this.loadFromStorage(),c.isEmptyObject(this._profile)||this._callCallbacksToUpdateUI()),this._signInWhenRedirectedBackFromIMS(function(){a._isFinalRedirectPageInModalMode()?window.opener&&(window.opener.adobeIMS._importDataFromModalWindow(a),c.closeWindow()):(a.loadFromStorage(),a.hasJustReturnedFromAuthorize?this.isSignedInUser()?a._testAccessTokensAreStillValid():a.signInBasedOnSingleSignOnSSO(function(){a._testAccessTokensAreStillValid()}):a.isSignedInUser(!0)?a.testAccessTokenIsStillValid(a.getAccessToken(!0),e):e())})},_signInWhenRedirectedBackFromIMS:function(a){var b=this,e=c.getHashFromURL().substring(1);e=e.replace("%23access_token","#access_token").replace("%23expires_in","#expires_in").replace("%23error","#error").replace("?error","#error").replace("#","&");var f=c.getQueryParamsAsMap(e),g=f.access_token,h=f.api;h===i.api.authorize.name&&c.assert(g,"the authorize api must return an access_token");var j=!!f.reauth,l=f.client_id||this.getClientID(),m=f.scope||this.getScope(),n=f.expires_in,o=f.error,p=f[E];try{J=JSON.parse(f.state)}catch(a){J=f.state}return this.contextPassedFromRedirect=p?{context:JSON.parse(p),access_token:g}:null,g&&n&&k.isFromIms(g)||"true"===f[C]&&h===i.api.logout.name||"true"===f[C]&&o?(d.setHash(f.old_hash||""),void(g?(this.hasJustReturnedFromAuthorize=!0,this._setAccessTokenAndGetProfile(g,j,l,m,n,null,function(){b.validateSSOCookieLifetime(g,a)})):(this._accessTokensInfos={},this._profile=null,o&&this._onError(this.errors.fromApiCallRedirect.setMessage(o)),a.call(this)))):void a.call(this)},getState:function(){return J||null},_setAccessTokenAndGetProfile:function(a,b,d,e,f,g,h){var i=this;f=+f;var j=g&&g[M];if(this._removeAccessTokensIfDifferentUserId(j),c.isEmptyObject(this._accessTokensInfos)&&this.loadFromStorage(),!this.shouldAcceptTheToken(a,d,e,j,!0,b))return void c.callIfFunction(h,i);var k=this.getAccessTokenSessionStorageKey(b,d,e),m=Date.now();this._accessTokensInfos[k]={access_token:a,client_id:d,user_id:j,scope:e,expires_in:f,createdAtMilliseconds:m,expiresAtMilliseconds:m+f,isReAuthentication:b},l(b).setItem(k,JSON.stringify(this._accessTokensInfos[k])),this.onReadyAlreadyCalled&&this._callCallbacksToUpdateUI(),g?c.callIfFunction(h,i):u(i,a,h)},setProfile:function(a,b){a&&!a.error_flag&&(this._profile=a,a?(m().setItem(B,JSON.stringify(this._profile)),this._removeAccessTokensIfDifferentUserId(a[M])):m().removeItem(B),!b&&this.onReadyAlreadyCalled&&this._callCallbacksToUpdateUI())},_removeAccessTokensIfDifferentUserId:function(a){if(a)for(var b in this._accessTokensInfos){var d=this._accessTokensInfos[b];d.user_id&&d.user_id!==a&&(this._clearCredentials({access_token:d.access_token,updateUI:!1}),c.isDebugMode&&c.logToConsole("remove token because of different user_id (isReAuthentication="+d.isReAuthentication+")"))}},_signInBasedOnStoredCredentials:function(a){this.loadFromStorage(),c.isEmptyObject(this._accessTokensInfos)?(this._clearCredentials(),c.callIfFunction(a,this)):this.hasJustReturnedFromAuthorize?(this.hasJustReturnedFromAuthorize=!1,c.callIfFunction(a)):this.testSingleLogOutSLO(a)},signInBasedOnSingleSignOnSSO:function(a){var b=this;this.acquireAccessToken(a,function(d){d=d||{},r(d)?(v(d,b),c.callIfFunction(a,b)):d.jump?(c.logToConsoleInDebugMode("jumping to "+d.jump),x(!0,d.jump),b.isModal()?b._clearCredentials():b._openWindow(d.jump,H.jump)):"ride_AdobeID_acct_evs"===d.error?(b._clearCredentials(),x(!0,null),b.isModal()||b.signIn()):"ride_AdobeID_acct_disabled"===d.error?b._invalidateTokens(Object.keys(b._accessTokensInfos),function(){b._clearCredentials({updateUI:!0}),x(!0,null),b.isModal()||b.signIn()}):"no_cors"===d.error?c.callIfFunction(a,b,["no_cors"]):(b._clearCredentials({updateUI:!0}),b.hasJustSingleLoggedOutSLO=!0,c.callIfFunction(a,b))})},acquireAccessToken:function(b,d){var e=this,f={redirect_uri:this._getRedirectUri(a.apiEndpoints.check),client_id:this.getClientID(a.apiEndpoints.check),scope:this.getScope(a.apiEndpoints.check)};a.checkToken(f,function(a){var d=c.cloneObject(a);c.removeKeyFromObject(d,"access_token"),c.removeKeyFromObject(d,"expires_in"),c.removeKeyFromObject(d,"token_type"),e.setProfile(d),e._setAccessTokenAndGetProfile(a.access_token,!1,f.client_id,f.scope,a.expires_in,d,b)},d)},testSingleLogOutSLO:function(b){if(!this.isSingleLogOutEnabled())return void c.callIfFunction(b,this);var d=this;a.checkStatus(function(a){a.sso===!1&&a.remember_me===!1?(d._clearCredentials({updateUI:!0}),d.hasJustSingleLoggedOutSLO=!0,c.callIfFunction(b,d)):d.signInBasedOnSingleSignOnSSO(b)})},validateSSOCookieLifetime:function(a,b){c.callIfFunction(b,this)},_clearTimerTestSSOCookieWillExpire:function(){this._timerTestSSOCookieWillExpire&&(clearInterval(this._timerTestSSOCookieWillExpire),this._timerTestSSOCookieWillExpire=null)},shouldAcceptTheToken:function(a,b,d,e,f,g){var h=!0;return[{shouldReject:f===!1,shouldLogToErrorConsole:!1,message:"access_token is invalid."},{shouldReject:f===!0&&e&&this._profile&&e!==this._profile[M],shouldLogToErrorConsole:!1,message:"access_token was from another userId (isReAuthentication=#0).".replace("#0",g)},{shouldReject:f===!0&&!this.isKnownClientID(b),shouldLogToErrorConsole:!0,message:"the #0 client_id associated with the access token is not for a known client_id (#1).".replace("#0",b).replace("#1",Object.keys?Object.keys(i.api.authorize.endpoint).join(","):this.getClientID())},{shouldReject:f===!0&&!this.matchesTheRequiredScope(d),shouldLogToErrorConsole:!0,message:"the (#0) scope associated with the access token doesn't match the required scope (#1).".replace("#0",d).replace("#1",this.getScope())
},{shouldReject:!a,shouldLogToErrorConsole:!0,message:"no access token."}].forEach(function(a){a.shouldReject&&(h=!1,(a.shouldLogToErrorConsole?c.logErrorToConsoleInDebugMode:c.logToConsoleInDebugMode)("shouldAcceptTheToken: "+a.message))}),h},testAccessTokenIsStillValid:function(b,d){var e=this,f=this._accessTokensInfos[this.getKeyForAccessToken(b)];c.assert(f,"we need token information to validate it");var g=function(a){if(a.token&&e.shouldAcceptTheToken(b,a.token.client_id,a.token.scope,a.token.user_id,a.valid,f.isReAuthentication))d();else{c.logToConsoleInDebugMode("validate/token: access_token is invalid. removing."),e._clearCredentials({updateUI:e.onReadyAlreadyCalled,access_token:b});try{a.token&&e.isKnownClientID(a.token.client_id)&&e.matchesTheRequiredScope(a.token.scope)&&c.callIfFunction(e.adobeid.onAccessTokenHasExpired,e.adobeid,[b,f])}catch(a){e._onError(e.errors.jsException.setException(a,"adobeid.onAccessTokenHasExpired"))}f.isReAuthentication?d():e.signInBasedOnSingleSignOnSSO(function(){!e.isSignedInUser()&&e.isMandatorySignIn()&&e.signIn(),d()})}};f&&this.isKnownClientID(f.client_id)?a.validateToken(f,g):g({valid:!1})},_testAccessTokensAreStillValid:function(){var a,b=0;for(a in this._accessTokensInfos)++b;var c=this,d=function(){--b,0===b&&c._onReady()};if(b>0)for(a in this._accessTokensInfos)c.testAccessTokenIsStillValid(this._accessTokensInfos[a].access_token,d);else c._onReady()},_importDataFromModalWindow:function(a){if(c.isEmptyObject(a._accessTokensInfos))this._clearCredentials({updateUI:!0});else{this.contextPassedFromRedirect=c.cloneObject(a.contextPassedFromRedirect),J=a.getState(),c.equals(a._profile,this._profile)||c.isEmptyObject(a._profile)||this.setProfile(c.cloneObject(a._profile),!0);for(var b in a._accessTokensInfos)if(!c.equals(a._accessTokensInfos[b],this._accessTokensInfos[b])){var d=c.cloneObject(a._accessTokensInfos[b]);this._accessTokensInfos[b]=d,l(d.isReAuthentication).setItem(b,JSON.stringify(d)),this.validateSSOCookieLifetime(this._accessTokensInfos[b].access_token)}this._callCallbacksToUpdateUI(),a.isSignedInUser(!0)&&!this.isSignedInUser(!1)&&this.signInBasedOnSingleSignOnSSO()}},_attachHandlersToUI:function(){c.logToConsoleInDebugMode("No-op: use the susiButtons module to automatically attach listeners to buttons")},_openWindow:function(a,b){if(this.isModal()){var c=Math.min(b&&b.width||H.any.width,screen.availWidth),e=Math.min(b&&b.height||H.any.height,screen.availHeight);w(a,{width:c,height:e,left:parseInt((screen.availLeft?screen.availLeft:0)+Math.max(0,screen.availWidth-c)/2),top:parseInt((screen.availTop?screen.availTop:0)+Math.max(0,screen.availHeight-e)/2),toolbar:!1,menubar:!1,scrollbars:!0,resizable:!0})||this._onError({error:"popupBlocked",popupUrl:a})}else d.setHref(a,this.isMandatorySignIn());this.contextToBePassedOnRedirect=null},isModal:function(){return!!this._isFinalRedirectPageInModalMode()||(this.adobeid.uses_modal_mode===!0&&this.adobeid.uses_redirect_mode===!0?(c.logErrorToConsoleInDebugMode("redirect mode and modal mode both enabled"),!0):"boolean"==typeof this.adobeid.uses_modal_mode?this.adobeid.uses_modal_mode:this.adobeid.uses_redirect_mode===!1)},_isFinalRedirectPageInModalMode:function(){return d.getHref().includes(F)&&window.opener&&window.opener!==window},getAdobeIdApiParametersForApi:function(b){return a.getApiParameters(b)},getLocale:function(){return a.getLocale()},getSocialProviders:function(b,c){return a.getSocialProviders(b,c)},getReleaseFlags:function(b,d){return null!==P?void c.callIfFunction(b,null,[P,O]):void a.getReleaseFlags(this.getAccessToken(),function(a,d){O=d||null,P=a||null,c.callIfFunction(b,null,[a,d])},d)},isReleaseFlagActive:function(a){return!!O&&"1"===O[a]},sunbreakHack:function(a){return a.replace(i.sunbreakScope,i.sunbreakScopeExpanded)},matchesTheRequiredScope:function(a){if(c.assert(c.String_hasContent(a),"scopeToValidate must be a non empty string for matchesTheRequiredScope"))return!1;var b=this.sunbreakHack(c.String_withoutWhitespaces(a)).split(",");return this.sunbreakHack(this.getScope()).split(",").every(function(a){return b.includes(a)})},getScope:function(b,c){return a.getScope(b,c)},isKnownClientID:function(a){return a in i.api.authorize.endpoint},getClientID:function(b,c){return a.getClientId(b,c)},isMandatorySignIn:function(){return this.adobeid.is_mandatory_sign_in===!0&&this.isModal()?(c.logErrorToConsoleInDebugMode("is_mandatory_sign_in can be enabled only in redirect mode"),!1):"boolean"==typeof this.adobeid.is_mandatory_sign_in&&this.adobeid.is_mandatory_sign_in},isSingleLogOutEnabled:function(){return"boolean"==typeof this.adobeid.uses_single_log_out?this.adobeid.uses_single_log_out:i.sloEnabled},isRefreshSSOCookiesEnabled:function(){return"boolean"==typeof this.adobeid.uses_refresh_sso_cookies?this.adobeid.uses_refresh_sso_cookies:i.refreshSsoCookiesEnabled},_getRedirectUri:function(a,b){var e="",f=c.applyExtraApiParameters(this.getAdobeIdApiParametersForApi(a),b);if(this.isModal())e=c.getBasePath(d.getHref())+F+"#"+D;else{e=f.redirect_uri?f.redirect_uri:this.adobeid.redirect_uri?this.adobeid.redirect_uri:d.getHref(),c.assert(!e.includes(C),"the redirect_uri mustn't already contain #from_ims");var g=c.getHashFromURL(e),h=e;g&&(h=h.substring(0,h.length-g.length)),e=h+"#"+D+"&old_hash="+encodeURIComponent(g)}return f.client_id&&(e+="&client_id="+encodeURIComponent(f.client_id)),f.scope&&(e+="&scope="+encodeURIComponent(f.scope)),a&&a.name&&(e+="&api="+encodeURIComponent(a.name)),e=this.updateRedirectUriForReAuthentication(e,f),c.isEmptyObject(this.contextToBePassedOnRedirect)||(e+="&"+E+"="+encodeURIComponent(JSON.stringify(this.contextToBePassedOnRedirect))),e},_ajaxGet:function(a,b,d){var f=this,g=function(d,e){if(d){var g=c.cloneObject(f.errors.network);g.debug={url:a},f._onError(g)}else b.call(f,e)};"jsonp"!==d&&e.corsSupported?e.corsGet(a,null,null,g):e.jsonp(a,{},g)},_handleTheJQueryDependency:function(){},_initOnDependencyLoad:function(){var a=this;h.onLoad(function(){a._initialize()})},_waitForDOMContentLoaded:function(){var a=this,b=!1,d=function(){b||(b=!0,a._initOnDependencyLoad())};"complete"===document.readyState||"loaded"===document.readyState?d.call():(c.addEventListener(document,"DOMContentLoaded",d),c.addEventListener(window,"load",d))}};return c.isDebugMode&&j.trackObject(Q),o.call(Q),Q},a.location=function(){"use strict";function a(){return window.location.href}function b(a,b){b?window.location.replace(a):window.location.href=a}function c(){return window.location.hash}function d(a){window.location.hash=a}return{getHref:a,setHref:b,getHash:c,setHash:d}},a.optimizations=function(b,c){"use strict";if(b=b||{},b.enable!==!1)for(var d in a.optimizations)a.optimizations.hasOwnProperty(d)&&"function"==typeof a.optimizations[d]&&a.optimizations[d].call(null,b,c)},a.optimizations.$$prefetchSuSi=function(a,b){"use strict";if(a.prefetchSuSi!==!1){var c=function(){if(!b.isSignedInUser()){var a=b.getUrlForApiCall(b.config.api.authorize,{client_id:b.getClientID()}),c=/^(https?:\/\/.+?)\//.exec(a)[1],d=c+"/favicon.ico?cache_bust="+Math.random().toString(16).slice(2),e=document.createElement("link");e.setAttribute("rel","prefetch"),e.setAttribute("href",d),document.getElementsByTagName("head")[0].appendChild(e)}};b.isReady()?c():b.addEventListener(b.Events.READY,c)}},a.storage=function(b){"use strict";function c(c){if(a.storage.$$isPolyfillNeeded(c,b)){b.logToConsoleInDebugMode("Polyfilled "+c+". All values are stored in Memory.");return new(a.storage.$$polyfill(b))}return window[c]}return{session:c("sessionStorage"),local:c("localStorage")}},a.storage.$$isPolyfillNeeded=function(a,b){"use strict";try{var c=window[a]}catch(c){return b.logToConsoleInDebugMode(a+" disabled"),!0}if(null===c||void 0===c)return!0;try{return c.setItem("isStoragePolyfillNeeded",!0),"true"!==c.getItem("isStoragePolyfillNeeded")||(c.removeItem("isStoragePolyfillNeeded"),!1)}catch(a){return!0}},a.storage.$$polyfill=function(a){"use strict";return function(){var b={};return{length:0,clear:function(){b={},this.length=0},getItem:function(a){var c=b[a];return void 0===c?null:c},keys:function(){return b},removeItem:function(c){b.hasOwnProperty(c)&&(a.removeKeyFromObject(b,c),--this.length)},setItem:function(a,c){b.hasOwnProperty(a)||++this.length,b[a]=c+""}}}},a.susiButtons=function(a,b){"use strict";function c(a,c,d){var f=document.querySelectorAll(e.replace("%action%",a)),g=function(){c.call(d)};NodeList.prototype.forEach||(f=Array.prototype.slice.call(f)),f.forEach(function(a){b.addEventListener(a,"click",g)})}function d(){var d=function(){f||(f=!0,c("signin",a.signIn,a),c("signup",a.signUp,a),c("signout",a.signOut,a),c("reauthenticate",a.reAuthenticate,a))};"complete"===window.document.readyState||"loaded"===window.document.readyState?d():(b.addEventListener(window.document,"DOMContentLoaded",d),b.addEventListener(window,"load",d))}var e='[data-adobeid-action="%action%"]',f=!1;return{attachListeners:d}},a.token=function(){"use strict";return{isFromIms:function(a){var b=RegExp(/^ims-/),c={},d="",e=[];if("string"!=typeof a||a.length<5)return!1;if(e=a.split("."),3!==e.length)return!1;d=e[1].replace(/-/g,"+").replace(/_/g,"/");try{c=JSON.parse(atob(d))}catch(a){return!1}return!!(c.as&&b.test(c.as)&&c.client_id&&c.created_at&&c.expires_in&&c.id&&c.moi&&c.scope&&c.type)}}},a.utils=function(a,b){"use strict";function c(){var a=document.querySelector('script[src*="imslib.min.js"]');return a||(a=document.querySelector('script[src*="imslib.js"]')),a?a.src:""}function d(a){window.console&&"function"==typeof window.console.log&&window.console.log("imslib.js: "+a)}function e(a){B&&d(a)}function f(a){B&&window.console&&"function"==typeof window.console.error&&window.console.error("imslib.js: "+a)}function g(a){var b=8,c="";if(a.length%8!==0)throw Error("Length must be a multiple of 8");for(var d=0,e=a.length;d<e;d+=b){c+=a.slice(d,d+b).split("").reverse().join("")}return c}function h(a){return"string"==typeof a&&a.length>0}function i(a){return a.replace(/\s/g,"")}function j(a,b){return a||f("assert: "+b),!a}function k(a){return a&&"function"==typeof a}function l(a,b,c){return k(a)?a.apply(b,c||[]):null}function m(a,b){try{delete a[b]}catch(c){a[b]=void 0}}function n(a,b){if(null===a)return null===b;if(null===b)return null===a;if(typeof a!=typeof b)return!1;if(Array.isArray(a)){if(!Array.isArray(b)||a.length!==b.length)return!1;for(var c=0;c<a.length;++c)if(!n(a[c],b[c]))return!1;return!0}if("object"==typeof a){var d;for(d in a)if(!(d in b&&n(a[d],b[d])))return!1;for(d in b)if(!(d in a))return!1;return!0}return a===b}function o(a){if(null===a)return null;if("object"!=typeof a)return a;var b;if(Array.isArray(a))b=[],a.forEach(function(a){b.push(o(a))});else{b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=o(a[c]))}return j(n(a,b),"cloned object has failed for "+JSON.stringify(a)),b}function p(a){return!a||n(a,{})}function q(){if(document.head)return document.head;var a=document.getElementsByTagName("head");return a&&a.length?a[0]:null}function r(a){var b=document.createElement("a");b.href=a;var c=b.protocol.replace(":",""),d={http:80,https:443},e=b.host;return d[c]&&(e=e.replace(RegExp(":"+d[c]+"$"),"")),{protocol:c,host:e,query:b.search,hash:b.hash.replace("#",""),path:("/"+b.pathname.slice(0,b.pathname.lastIndexOf("/")+1)).replace("//","/")}}function s(a){var b=r(a);return b.protocol+"://"+b.host+b.path}function t(b){!b&&a&&(b=a.getHref());var c=b.indexOf("#");return c!==-1?b.substring(c):""}function u(a){a=a.replace(/^(#|\?|&)/,"");var b={};return a.split("&").forEach(function(a){if(a.length){var c=a.split("=");b[c[0]]=decodeURIComponent(c[1])}}),b}function v(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function w(a){for(var b=o(a),c=1;c<arguments.length;++c){var d=arguments[c];if("object"==typeof d)for(var e in d){var f=d[e];void 0!==f?b[e]="object"!=typeof f?f:w(b[e]||{},f):m(b,e)}}return b}function x(a,b,c){return window.open(a,b,c)}function y(){window.close()}function z(){var a=Math.random().toString(16);return a.slice(a.indexOf(".")+1)}var A=c(),B=b;return B&&(A&&d("loaded from "+A),d("isDebugMode")),{isDebugMode:B,logToConsole:d,logToConsoleInDebugMode:e,logErrorToConsoleInDebugMode:f,assert:j,bitstringToLSB:g,String_hasContent:h,String_withoutWhitespaces:i,applyExtraApiParameters:w,parseUrl:r,getBasePath:s,getHashFromURL:t,getQueryParamsAsMap:u,isFunction:k,callIfFunction:l,removeKeyFromObject:m,cloneObject:o,equals:n,isEmptyObject:p,getDocumentHead:q,addEventListener:v,openPopup:x,closeWindow:y,getThisScriptSrc:c,createRandomString:z}},a.vendors=function(){"use strict";var b={},c={json:"https://static.adobelogin.com/renga-idprovider/resources/js/json2-min.js"},d=a.vendors.$$neededVendors(),e=function(a,b){var c=document.createElement("script");c.type="text/javascript",c.src=a,"function"==typeof b&&(c.onload=function(){window.setTimeout(b,1)}),(document.head||document.getElementsByTagName("head")[0]).appendChild(c)},f=function(a){e(c.json,a)},g=!1,h=[],i=function(){if(!d.isJSONNeeded||g)for(var a=h.shift();a;)a(b),a=h.shift()};return b.onLoad=function(a){h.push(a),window.setTimeout(i,0)},d.isJSONNeeded&&f(function(){g=!0,i()}),b},a.vendors.$$neededVendors=function(){"use strict";return{isJSONNeeded:function(){return!(window.JSON&&"function"==typeof window.JSON.stringify)}()}},(a.bootstrap=function(){"use strict";var b=a.alertMessages(),c=a.vendors(),d=a.location(),e=a.token(),f=a.utils(d,parseInt("0",10)),g=a.adobeid(f),h=a.storage(f),i=a.analytics(h),j=a.events(f),k=a.base32(f),l=a.config(JSON.parse('{"services":"https://adobeid-na1.services.adobe.com/ims","login":"https://ims-na1.adobelogin.com/ims"}'),g,f),m=a.http(f,{jslClient:l.client_id,jslVersion:"0ad1971"},i),n=a.imsApis(m,f,g,l.api,k,l.client_id,l.locale);window.adobeIMS=a.adobeIMS(n,g,f,d,m,h,j,c,l,i,e),window.adobeIMS.version="1.9.0";var o=a.susiButtons(window.adobeIMS,f);a.optimizations(g.optimizations,window.adobeIMS),window.adobeIMS.config=l,window.adobeIMS.IMSAPIs=l.api,window.AdobeIMSStrings=b,window.adobeIMS._initOnDependencyLoad(),o.attachListeners()})()}({});
//# sourceMappingURL=imslib.min.js.map